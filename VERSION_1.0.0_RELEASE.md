# 51吃瓜浏览器 v1.0.0 - 发布说明

## 📅 发布信息

- **版本**: 1.0.0
- **发布日期**: 2026-02-07
- **打包时间**: 17:45
- **构建工具**: electron-builder 24.13.3
- **Electron**: v30.5.1

## 🎉 新功能

### 1. **详情页面查看**
- ✅ 点击任意卡片查看完整详情
- ✅ 新窗口打开，直接访问原站点
- ✅ 支持完整网页功能和交互
- ✅ 多窗口支持，可同时打开多个详情

### 2. **已同步内容可查看**
- ✅ 灰色卡片（已同步）可以点击查看详情
- ✅ 复选框保持禁用，防止重复同步
- ✅ 悬停时有视觉反馈（透明度提升、灰度减少）
- ✅ 明确的视觉区分

### 3. **多视频支持**
- ✅ 支持一篇文章包含多个视频
- ✅ 每个视频独立处理和上传
- ✅ 视频存储在独立目录
- ✅ M3U8 和 MP4 格式完整支持

### 4. **智能全选功能**
- ✅ 全选时自动忽略已同步内容
- ✅ 工具栏显示"已选择 X 项 / 共 Y 项可选"
- ✅ 全选复选框状态智能显示
- ✅ 防止误操作

### 5. **同步按钮状态锁定**
- ✅ 同步中按钮自动禁用
- ✅ 显示"⏳ 同步中..."状态
- ✅ 图标旋转动画
- ✅ 同步完成后自动恢复

### 6. **自动同步状态检测**
- ✅ 列表加载时自动检查已同步内容
- ✅ 自动标记已同步项目
- ✅ 无需手动检查
- ✅ 智能缓存管理

### 7. **双击安装脚本**
- ✅ install.command - 自动安装脚本
- ✅ fix-and-launch.command - 快速启动脚本
- ✅ 自动处理 macOS xattr 问题
- ✅ 用户友好的交互提示

## 🔧 技术改进

### 内容同步
- ✅ 完整的图片和视频处理管道
- ✅ R2 云存储集成
- ✅ M3U8 视频流处理
- ✅ AES 加密密钥支持
- ✅ 并发任务队列管理

### 用户界面
- ✅ 响应式卡片布局（260x270）
- ✅ 流畅的悬停动画
- ✅ 实时同步进度显示
- ✅ 清晰的状态反馈

### 数据处理
- ✅ 智能 HTML 格式化
- ✅ 图片路径自动替换
- ✅ 视频标签规范化
- ✅ 防止内容重复同步

## 📦 下载

### 系统要求
- macOS 10.12 或更高版本
- 200 MB 可用磁盘空间
- 网络连接

### 下载文件

**Apple Silicon (M1/M2/M3):**
- 文件: `51吃瓜浏览器-分发包-ARM64.zip` (92 MB)
- 包含: DMG + 安装脚本 + 说明文档

**Intel:**
- 文件: `51吃瓜浏览器-分发包-Intel.zip` (98 MB)
- 包含: DMG + 安装脚本 + 说明文档

### 如何确认芯片类型
1. 点击 Apple 菜单 () → 关于本机
2. 查看"芯片"或"处理器"
3. M1/M2/M3 = Apple Silicon
4. Intel Core i5/i7/i9 = Intel

## 🚀 安装方式

### 方式 1: 自动安装（推荐）⭐

```bash
1. 下载并解压分发包
2. 双击 install.command
3. 自动安装并启动
```

**特点**:
- ✅ 完全自动化
- ✅ 自动移除隔离属性
- ✅ 自动启动应用
- ✅ 友好的进度提示

### 方式 2: 快速修复

```bash
1. 手动安装 DMG 到 Applications
2. 双击 fix-and-launch.command
3. 自动修复并启动
```

**适用场景**:
- 已经安装过应用
- 遇到"应用已损坏"错误
- 需要快速启动

### 方式 3: 手动命令

```bash
# 1. 安装 DMG
open 51吃瓜浏览器-1.0.0-arm64.dmg
# 拖动到 Applications

# 2. 移除隔离属性
xattr -cr /Applications/51吃瓜浏览器.app

# 3. 启动应用
open /Applications/51吃瓜浏览器.app
```

**适用场景**:
- 熟悉终端命令
- 需要手动控制
- 脚本无法运行

## 💡 使用指南

### 首次使用

1. **配置同步参数**
   - API 地址
   - 认证信息
   - R2 存储配置

2. **浏览内容**
   - 选择分类
   - 查看列表
   - 点击卡片查看详情

3. **同步内容**
   - 勾选要同步的项目
   - 点击"开始同步"
   - 等待同步完成

### 查看详情

**方式 1: 未同步内容**
```
点击卡片 → 新窗口打开 → 查看完整内容
```

**方式 2: 已同步内容**
```
点击灰色卡片 → 新窗口打开 → 查看完整内容
（复选框禁用，防止重复同步）
```

### 批量同步

```
1. 点击"全选"按钮
   → 自动选择所有未同步内容
   
2. 点击"开始同步"
   → 显示同步进度
   
3. 同步过程中可以继续浏览
   → 多任务处理
   
4. 同步完成后自动标记
   → 卡片变为灰色
```

## ⚠️ 常见问题

### Q1: "应用已损坏，无法打开"

**原因**: macOS Gatekeeper 安全机制

**解决方案（3选1）**:

1. 使用 install.command（推荐）
2. 使用 fix-and-launch.command
3. 手动运行: `xattr -cr /Applications/51吃瓜浏览器.app`

### Q2: 双击 .command 文件没反应

**解决方案**:
```bash
# 给脚本添加执行权限
chmod +x install.command fix-and-launch.command
```

或者右键 → 打开（首次）

### Q3: 详情窗口加载失败

**原因**: 网络连接问题或原站点防护

**解决方案**:
1. 检查网络连接
2. 稍后重试
3. 查看控制台错误日志

### Q4: 同步进度卡住

**解决方案**:
1. 查看进度提示
2. 等待超时自动恢复
3. 检查网络连接
4. 查看日志: `/tmp/51chigua-app.log`

### Q5: 已同步的内容想重新同步

**说明**: 
- 已同步内容复选框被禁用
- 防止重复同步
- 如需重新同步，需在后台数据库删除

## 🐛 已知问题

1. **未签名应用**
   - 首次运行需要处理 xattr
   - 提供了自动化脚本解决

2. **默认图标**
   - 使用 Electron 默认图标
   - 不影响功能使用

3. **M3U8 加载慢**
   - 取决于原站点速度
   - 建议等待完整加载

## 📊 性能指标

- **启动时间**: < 3 秒
- **列表加载**: < 2 秒
- **详情打开**: < 1 秒
- **同步速度**: 取决于内容大小和网络

## 🔐 安全性

- ✅ 启用 Context Isolation
- ✅ 禁用 Node Integration
- ✅ 启用 Web Security
- ✅ 安全的 IPC 通信
- ✅ 本地数据加密

## 📝 更新日志

### v1.0.0 (2026-02-07)

**新增**:
- ✅ 详情页面查看功能
- ✅ 多视频支持
- ✅ 智能全选功能
- ✅ 同步按钮状态锁定
- ✅ 自动同步状态检测
- ✅ 双击安装脚本

**优化**:
- ✅ 卡片布局（260x270）
- ✅ 悬停动画效果
- ✅ 已同步内容可查看详情
- ✅ HTML 格式化逻辑
- ✅ 错误处理和日志

**修复**:
- ✅ M3U8 路径重复问题
- ✅ 图片替换逻辑
- ✅ 多视频处理
- ✅ xattr 自动处理

## 🙏 致谢

感谢所有测试人员的反馈和建议！

## 📞 技术支持

如有问题，请提供：
1. macOS 版本: `sw_vers`
2. 错误截图
3. 日志内容: `/tmp/51chigua-app.log`
4. 操作步骤描述

## 🔄 后续计划

- [ ] 添加自定义应用图标
- [ ] 申请代码签名证书
- [ ] 优化应用体积
- [ ] 添加自动更新功能
- [ ] 支持 Windows 版本
- [ ] 添加内容搜索功能

## 📄 许可证

MIT License

---

**版本**: 1.0.0  
**发布**: 2026-02-07  
**作者**: Lee  
**平台**: macOS (Intel + Apple Silicon)

🎉 感谢使用 51吃瓜浏览器！
